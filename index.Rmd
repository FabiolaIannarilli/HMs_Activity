--- 
title: "A “How to” guide on estimating Activity Patterns from Camera-Trap Data using a Hierarchical Modeling approach:\n tutorials"
author: 
  - name: "Fabiola Iannarilli"
    email: fabiola.iannarilli@gmail.com
    affiliation: Department of Fisheries, Wildlife and Conservation Biology, St. Paul, Minnesota, USA; Max Planck Institute of Animal Behavior, Konstanz, Germany 
    correspondence: true
  - name: "Brian Gerber"
    affiliation:  USGS, Colorado Cooperative Fish and Wildlife Research Unit, Colorado State University, Fort Collins, Colorado, USA
  - name: "John Erb"
    affiliation:  Minnesota Department of Natural Resources, Grand Rapids, Minnesota, USA
  - name: "John R Fieberg"
    affiliation: Department of Fisheries, Wildlife and Conservation Biology, St. Paul, Minnesota, USA
site: bookdown::bookdown_site
output: distill::distill_article
documentclass: book
bibliography: [book.bib, packages.bib, articles.bib]
biblio-style: apalike
link-citations: yes
github-repo: rstudio/bookdown-demo
description: "This document contains how-to tutorials that illustrate the use of hierarchical models for the analysis of activity patterns. It accompanies the manuscript Iannarilli et al. 202?."
pdf_document: 
    number_sections: yes
    toc: yes
    toc_depth: 4
    pandoc_args:
      - '--lua-filter=scholarly-metadata.lua'
      - '--lua-filter=author-info-blocks.lua'
---

# Preface {#preface}
<! -- paragraph to fix once we have defined the final order of the chapters -->

This vignette accompanies the manuscript @Iannarilliea2024 and contains step-by-step examples on how to use trigonometric and cyclic cubic spline Hierarchical Models (HMs) to analyze activity patterns from time-stamped camera-trap data (sections \@ref(est), \@ref(unibim)). It also includes examples of comparing the importance of different covariates when fitting GLMMs to describe activity patterns (section \@ref(cat)), and additional resources to illustrate the difference between conditional and marginal mean activity patterns (section \@ref(condvsmarg)) and the application of Kernel Density Estimators through the packages currently available in R (section \@ref(kdes)).

All the analyses presented in the following sections were performed in @R-base. The camera-trap data used in the real-case examples can be accessed at XXXX. Details on how this data were collected can be found in @Iannarilliea2021.

## Requirements
Throughout this tutorial, we use several packages. Users interested in compiling the tutorial from sources and those that would like to reproduce the code provided in the next sections in their own machine should make sure to install these libraries. The code below provides a list of all the packages needed, check if they are already installed in your local machine, and install those that are not.

``` {r preface1}
list.of.packages <- c("dplyr", "grid", "gridExtra", "GLMMadaptive", "ggpubr", "mgcv", 
                      "tidyr", "lubridate", "lmtest", "activity", "overlap", "circular", 
                      "nimble", "brms")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)>0) install.packages(new.packages)

# install packages from github repos
remotes::install_github('mapoflife/rstoat', ref='main')
```

In some section, we also use *sim_activity*, a custom function that simulate activity patterns under different conditions. A description of this function is provided in \@ref(app)  at the end of this tutorial.