--- 
title: "A 'How to' Guide for Estimating Animal Diel Activity Using Hierarchical Models: tutorials"
author: 
  - name: "Fabiola Iannarilli"
    email: fabiola.iannarilli@gmail.com
    affiliation: Department of Fisheries, Wildlife and Conservation Biology, St. Paul, Minnesota, USA; Max Planck Institute of Animal Behavior, Konstanz, Germany 
    correspondence: true
  - name: "Brian D. Gerber"
    affiliation:  USGS, Colorado Cooperative Fish and Wildlife Research Unit, Colorado State University, Fort Collins, Colorado, USA
  - name: "John Erb"
    affiliation:  Minnesota Department of Natural Resources, Grand Rapids, Minnesota, USA
  - name: "John R. Fieberg"
    affiliation: Department of Fisheries, Wildlife and Conservation Biology, St. Paul, Minnesota, USA
site: bookdown::bookdown_site
output: distill::distill_article
documentclass: book
bibliography: [book.bib, packages.bib, articles.bib]
biblio-style: apalike
link-citations: yes
github-repo: rstudio/bookdown-demo
description: "This document contains how-to tutorials that illustrate the use of hierarchical models for the analysis of activity patterns. It accompanies the manuscript Iannarilli et al. 2024."
pdf_document: 
    number_chapters: yes
    toc: yes
    toc_depth: 4
    pandoc_args:
      - '--lua-filter=scholarly-metadata.lua'
      - '--lua-filter=author-info-blocks.lua'
---

# Preface {#preface}
<!-- paragraph to fix once we have defined the final order of the chapters -->

This vignette accompanies the manuscript @Iannarilliea2024 and contains step-by-step examples on how to use trigonometric and cyclic cubic spline Hierarchical Models (HMs) to analyze activity patterns from time-stamped data (chapters \@ref(est), \@ref(unibim)). In this tutorial, we present case studies based on camera-trap data, but the approaches described can be applied to data collected vis other static sensors (e.g., acoustic recorders). The tutorial also includes examples of comparing the importance of different covariates when fitting GLMMs to describe activity patterns (chapter \@ref(cov)), and additional resources to illustrate the difference between conditional and marginal mean activity patterns (chapter \@ref(condvsmarg)) and the application of Kernel Density Estimators through the packages currently available in R (chapter \@ref(kdes)).

All the analyses presented in the following chapters were performed in @R-base. The camera-trap data used in the real-case examples were collected at 100 locations sampled between 2016 and 2018 in Northern Minnesota, USA [@Iannarilliea2021] and can be accessed at XXXX. Further details on these data can be found in @Iannarilliea2021.

## Requirements
Throughout this tutorial, we use several packages. Users interested in compiling the tutorial from source or in reproducing the analysis on their own machine should install these packages. The code below provides a list of all the libraries needed, check if they are already installed in the user's local machine, and install those that are not.

``` {r preface1}
list.of.packages <- c("dplyr", "grid", "gridExtra", "GLMMadaptive", "ggpubr", "mgcv", 
                      "tidyr", "lubridate", "lmtest", "activity", "overlap", "circular", 
                      "nimble", "brms", "forcats", "MESS")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)>0) install.packages(new.packages)
if(!("Diel.Niche" %in% installed.packages()[,"Package"])){
  # Install package from GitHub via the devtools package.
  devtools::install_github("diel-project/Diel-Niche-Modeling",
                         ref="main", dependencies = TRUE,
                         build_vignettes = FALSE
)
} 

```

In chapter \@ref(est), we use the function *sim_activity*, a custom function that we built to simulate activity patterns under different conditions. A description of this function is provided in chapter \@ref(app) at the end of this tutorial.